#!/usr/bin/env ruby

USAGE = <<EOS
Usage: git update-feature-branch <branch> [remote-branch]

<branch>        - Mandatory. This is your local branch. 
[remote-branch] - Optional.  This is the remote branch on origin. If not provided this script will use "origin/branch".
                             Next version will provide the possibility to use arbitrary remotes.

  -h, --help     shows this information
  --continue     Continues the script after interrupting due to e.g. conflict-solving. (Also next version.)

This script is idempotent. If it fails, e.g. because of conflicts, 
you can simply rerun it.

Using the cool rebasing with git, feature-branches in collaboration can get tricky if you want to keep your work up-to-date with master.
This script takes care of this.
First it rebases your local-, and the remote-branch, with master.
Second it rebases your branch with the local copy and deletes the copy.

Thank you, for using Gnyp-Soft.
EOS

require 'git_update_feature_branch'

# Checking for illegal args
if ARGV.empty? or ARGV.delete("--help") or ARGV.delete("-h")
  puts USAGE
  exit 0
end

ARGV.each { |a| abort "Error: unknown argument #{a}." if a =~ /^--/ }

base = Base.new
base.run

